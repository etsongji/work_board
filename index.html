<!DOCTYPE html>
<html lang="ko" data-color-scheme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>교무부장 업무 & 휴직 관리 대시보드</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Message Container -->
    <div id="message-container" class="message-container hidden">
        <div id="message" class="message"></div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Dashboard Header -->
        <header class="dashboard-header">
            <h1>교무부장 업무 & 휴직 관리 대시보드</h1>
            <div class="year-info">2025년</div>
        </header>

        <!-- Main Navigation Tabs -->
        <div class="main-nav-tabs">
            <button class="main-nav-tab active" onclick="switchMainTab('task-management')">업무관리</button>
            <button class="main-nav-tab" onclick="switchMainTab('absence-management')">휴직관리</button>
        </div>

        <!-- Task Management Section -->
        <div id="task-management" class="tab-content active">
            <!-- Overall Progress -->
            <div class="overall-progress card">
                <div class="card__body">
                    <h2>연간 진척률</h2>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="overall-progress-fill"></div>
                        </div>
                        <span class="progress-text" id="overall-progress-text">0%</span>
                    </div>
                </div>
            </div>

            <!-- Month Tabs -->
            <div class="month-tabs">
                <button class="month-tab active" data-month="1" onclick="switchMonth(1)">1월</button>
                <button class="month-tab" data-month="2" onclick="switchMonth(2)">2월</button>
                <button class="month-tab" data-month="3" onclick="switchMonth(3)">3월</button>
                <button class="month-tab" data-month="4" onclick="switchMonth(4)">4월</button>
                <button class="month-tab" data-month="5" onclick="switchMonth(5)">5월</button>
                <button class="month-tab" data-month="6" onclick="switchMonth(6)">6월</button>
                <button class="month-tab" data-month="7" onclick="switchMonth(7)">7월</button>
                <button class="month-tab" data-month="8" onclick="switchMonth(8)">8월</button>
                <button class="month-tab" data-month="9" onclick="switchMonth(9)">9월</button>
                <button class="month-tab" data-month="10" onclick="switchMonth(10)">10월</button>
                <button class="month-tab" data-month="11" onclick="switchMonth(11)">11월</button>
                <button class="month-tab" data-month="12" onclick="switchMonth(12)">12월</button>
            </div>

            <!-- Monthly Header with Progress and Add Button -->
            <div class="monthly-header">
                <div class="monthly-progress card">
                    <div class="card__body">
                        <h3 id="monthly-title">1월 진척률</h3>
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress-fill" id="monthly-progress-fill"></div>
                            </div>
                            <span class="progress-text" id="monthly-progress-text">0%</span>
                        </div>
                    </div>
                </div>
                <button class="btn btn--primary add-task-btn" onclick="openTaskModal()">
                    <span class="add-icon">+</span>
                    업무 추가
                </button>
            </div>

            <!-- Task Content -->
            <div id="task-content"></div>
        </div>

        <!-- Absence Management Section -->
        <div id="absence-management" class="tab-content">
            <!-- Absence Stats -->
            <div class="absence-stats card">
                <div class="card__body">
                    <h2>휴직 현황 요약</h2>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-label">총 교사수</span>
                            <span class="stat-value" id="total-teachers">8</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">현재 휴직중</span>
                            <span class="stat-value" id="current-absence">1</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">대기중 신청</span>
                            <span class="stat-value" id="pending-absence">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">가용 기간제교사</span>
                            <span class="stat-value" id="available-substitutes">3</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Absence Controls -->
            <div class="absence-controls">
                <div class="view-controls">
                    <button class="view-btn active" onclick="switchAbsenceView('list')">목록</button>
                    <button class="view-btn" onclick="switchAbsenceView('table')">테이블</button>
                    <button class="view-btn" onclick="switchAbsenceView('substitutes')">기간제교사</button>
                </div>
                <button class="btn btn--primary" onclick="openAbsenceModal()">휴직 신청</button>
            </div>

            <!-- Absence Regulation Info -->
            <div class="card absence-regulation">
                <div class="card__body">
                    <h3>📋 교육공무원 휴직 유형 (교육공무원법 제44조)</h3>
                    <div class="regulation-grid">
                        <div class="regulation-section">
                            <h4 style="color: var(--color-red-500);">🔴 직권휴직 (5종)</h4>
                            <ul>
                                <li>• 질병휴직 (신체·정신상 장애)</li>
                                <li>• 병역휴직 (병역복무)</li>
                                <li>• 생사불명휴직 (천재지변 등)</li>
                                <li>• 법정의무수행휴직</li>
                                <li>• 노조전임자휴직</li>
                            </ul>
                        </div>
                        <div class="regulation-section">
                            <h4 style="color: var(--color-primary);">🔵 청원휴직 (9종)</h4>
                            <ul>
                                <li>• 유학휴직 (해외유학·연구)</li>
                                <li>• 고용휴직 (국제기구 등)</li>
                                <li>• 육아휴직 (만8세 이하 자녀)</li>
                                <li>• 입양휴직 (만19세 미만)</li>
                                <li>• 불임·난임휴직</li>
                                <li>• 연수휴직 (지정기관 연수)</li>
                                <li>• 가족돌봄휴직</li>
                                <li>• 동반휴직 (배우자 해외근무)</li>
                                <li>• 자율연수휴직 (연구년)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- List View -->
            <div id="list-view" class="absence-view active">
                <div class="card">
                    <div class="card__body">
                        <h3>휴직 신청 목록</h3>
                        <div id="absence-list"></div>
                    </div>
                </div>
            </div>

            <!-- Table View -->
            <div id="table-view" class="absence-view">
                <div class="card">
                    <div class="card__body">
                        <h3>교사별 휴직 현황</h3>
                        <div class="table-container">
                            <table class="absence-table">
                                <thead>
                                    <tr>
                                        <th>교사명</th>
                                        <th>담당과목</th>
                                        <th>학년</th>
                                        <th>휴직유형</th>
                                        <th>휴직기간</th>
                                        <th>대체교사</th>
                                        <th>현재상태</th>
                                        <th>관리</th>
                                    </tr>
                                </thead>
                                <tbody id="absence-table-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Substitutes View -->
            <div id="substitutes-view" class="absence-view">
                <div class="card">
                    <div class="card__body">
                        <h3>기간제교사 현황</h3>
                        <div class="substitutes-grid" id="substitutes-grid"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Task Modal -->
    <div id="task-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeTaskModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="task-modal-title">업무 추가</h3>
                <button type="button" class="modal-close" onclick="closeTaskModal()">×</button>
            </div>
            <div class="modal-body">
                <form id="task-form" onsubmit="handleTaskSubmit(event)">
                    <div class="form-group">
                        <label class="form-label">업무명 *</label>
                        <input type="text" id="task-name" class="form-control" required placeholder="업무명을 입력하세요">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">업무 유형 *</label>
                        <select id="task-type" class="form-control" required>
                            <option value="">업무 유형을 선택하세요</option>
                            <option value="정기업무">정기업무</option>
                            <option value="특별업무">특별업무</option>
                            <option value="준비업무">준비업무</option>
                            <option value="프로젝트업무">프로젝트업무</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">업무 설명</label>
                        <textarea id="task-description" class="form-control" rows="3" placeholder="업무 설명을 입력하세요"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">적용 월 선택 *</label>
                        <div class="month-checkboxes">
                            <label class="checkbox-label">
                                <input type="checkbox" value="1"> 1월
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="2"> 2월
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="3"> 3월
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="4"> 4월
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="5"> 5월
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="6"> 6월
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="7"> 7월
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="8"> 8월
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="9"> 9월
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="10"> 10월
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="11"> 11월
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="12"> 12월
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">주 수 설정</label>
                        <select id="weeks-count" class="form-control">
                            <option value="4">4주</option>
                            <option value="5">5주</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">세부 단계/체크리스트 (선택사항)</label>
                        <div id="steps-container" class="steps-container">
                            <div class="step-input">
                                <input type="text" class="form-control step-text" placeholder="단계 설명을 입력하세요">
                                <button type="button" class="btn-remove-step" onclick="removeStep(this)">×</button>
                            </div>
                        </div>
                        <button type="button" class="btn btn--secondary btn-add-step" onclick="addStep()">+ 단계 추가</button>
                    </div>
                    
                    <div class="modal-footer">
                        <button type="button" class="btn btn--secondary" onclick="closeTaskModal()">취소</button>
                        <button type="submit" class="btn btn--primary">저장</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Confirmation Dialog -->
    <div id="confirm-dialog" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content confirm-dialog">
            <div class="modal-body">
                <h4 id="confirm-title">확인</h4>
                <p id="confirm-message">정말로 이 작업을 실행하시겠습니까?</p>
                <div class="modal-footer">
                    <button type="button" class="btn btn--secondary" id="confirm-cancel-btn">취소</button>
                    <button type="button" class="btn btn--primary" id="confirm-ok-btn">확인</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Absence Modal -->
    <div id="absence-modal" class="modal hidden">
        <div class="modal-overlay" onclick="closeAbsenceModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="absence-modal-title">휴직 신청</h3>
                <button type="button" class="modal-close" onclick="closeAbsenceModal()">×</button>
            </div>
            <div class="modal-body">
                <form id="absence-form" onsubmit="handleAbsenceSubmit(event)">
                    <div class="form-group">
                        <label class="form-label">교사명</label>
                        <select id="absence-teacher" class="form-control" required>
                            <option value="">교사를 선택하세요</option>
                            <option value="김영희">김영희 (국어, 1학년)</option>
                            <option value="박민수">박민수 (수학, 2학년)</option>
                            <option value="이정은">이정은 (영어, 3학년)</option>
                            <option value="최수진">최수진 (과학, 1학년)</option>
                            <option value="장기용">장기용 (사회, 2학년)</option>
                            <option value="윤서연">윤서연 (미술, 전학년)</option>
                            <option value="한동민">한동민 (체육, 전학년)</option>
                            <option value="정혜림">정혜림 (음악, 전학년)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">휴직유형 (교육공무원법 제44조)</label>
                        <select id="absence-type" class="form-control" required>
                            <option value="">휴직 유형을 선택하세요</option>
                            <optgroup label="직권휴직">
                                <option value="질병휴직">질병휴직 (신체·정신상 장애)</option>
                                <option value="병역휴직">병역휴직 (병역복무)</option>
                                <option value="생사불명휴직">생사불명휴직 (천재지변 등)</option>
                                <option value="법정의무수행휴직">법정의무수행휴직</option>
                                <option value="노조전임자휴직">노조전임자휴직</option>
                            </optgroup>
                            <optgroup label="청원휴직">
                                <option value="유학휴직">유학휴직 (해외유학·연구)</option>
                                <option value="고용휴직">고용휴직 (국제기구 등)</option>
                                <option value="육아휴직">육아휴직 (만8세 이하 자녀)</option>
                                <option value="입양휴직">입양휴직 (만19세 미만)</option>
                                <option value="불임·난임휴직">불임·난임휴직</option>
                                <option value="연수휴직">연수휴직 (지정기관 연수)</option>
                                <option value="가족돌봄휴직">가족돌봄휴직</option>
                                <option value="동반휴직">동반휴직 (배우자 해외근무)</option>
                                <option value="자율연수휴직">자율연수휴직 (연구년)</option>
                            </optgroup>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">시작일</label>
                        <input type="date" id="absence-start" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">종료일 (예정)</label>
                        <input type="date" id="absence-end" class="form-control">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">대체교사</label>
                        <select id="absence-substitute" class="form-control">
                            <option value="">대체교사를 선택하세요</option>
                            <option value="강나연">강나연 (국어, 사회)</option>
                            <option value="임철호">임철호 (수학, 과학)</option>
                            <option value="송미경">송미경 (영어)</option>
                            <option value="오진석">오진석 (체육, 미술)</option>
                            <option value="안소희">안소희 (음악, 미술)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">휴직 사유</label>
                        <textarea id="absence-reason" class="form-control" rows="3" placeholder="휴직 사유를 상세히 입력하세요" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">승인상태</label>
                        <select id="absence-status" class="form-control">
                            <option value="대기">대기</option>
                            <option value="승인">승인</option>
                            <option value="반려">반려</option>
                        </select>
                    </div>
                    
                    <div class="modal-footer">
                        <button type="button" class="btn btn--secondary" onclick="closeAbsenceModal()">취소</button>
                        <button type="submit" class="btn btn--primary">저장</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>